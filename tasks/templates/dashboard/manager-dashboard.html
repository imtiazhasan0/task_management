{% extends "dashboard/dashboard.html" %}
{% block title %}Manager Dashboard{% endblock title %}
{% block tasks %}

<div class="container mx-auto p-4">
    {% if messages %}
        {% for message in messages %}
        <div class="px-2 py-1 
            {% if message.tags == "success" %} bg-green-400 
            {% elif message.tags == "error" %} bg-red-400 
            {% elif message.tags == "warning" %} bg-yellow-400 
            {% else %} bg-blue-400 
            {% endif %}
        ">
            {{ message }}
        </div>
        {% endfor %}
    {% endif %}
</div>
<!-- task_table -->
         <div class="bg-white rounded-xl shadow-sm mt-8 ">
            <div class="grid grid-cols-4 p-4 border-b border-gray-100 text-sm text-gray-500">
                <div>Task Title</div>
                <div>Priority</div>
                <div>Team</div>
                <div>Created At</div>
            </div>


            <!-- task_item -->
            <div class="divide-y divide-gray-100  ">
                {% for task in task %}
                    <div class="grid grid-cols-4 p-4 gap-4 item-center" >
                    <div class="flex items-center gap-2">
                        <div class="w-2 h-2 bg-green-600 rounded-full"></div>
                        <div>
                            <span>{{task.title}}</span>
                            <div>
                                <a href="{% url "update-task" task.id %}" class= "px-2 py-1 bg bg-green-600 text-black">Edit</a>
                                <form action="{% url "delete-task" task.id %}" method="POST">
                                    <button type="submit" class= "px-2 py-1 bg bg-red-600 text-black">Delete</button>
                                    {% csrf_token %}
                                </form>
                        </div>
                            </div>
                    </div>
                    <div>
                        <span class="px-3 py-1 rounded-full bg-blue-50 text-blue-600 text-sm">{{task.details.get_priority_display}}</span>
                    </div>
                    <div>
                        <div class="flex -space-x-2">
                            {% for emp in task.assigned_to.all %}
                                <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm border-2 border-white">{{emp.name|slice:':2'}}</div>
                            {% endfor %}
                        </div>
                    </div>
                    <div>
                        <span class="text-gray-500">{{task.created_at| timesince}}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
         </div> 

{% endblock tasks %}